load ../../systems/bank-account.maude
load ../../rltool.maude

--- < bal: n pend: x overdraft: ff > # msgs | n >= x = tt /\ x = debts(msgs)

(select BANK-ACCOUNT-stop .)
(use tool impsimp for validity         on BANK-ACCOUNT-DEFINEDOPS with FOFORMSIMPLIFY .)
(use tool varsat  for validity         on FVP-NAT-PRED .)
(use tool varsat  for unsatisfiability on FVP-NAT-PRED .)
(declare-vars (A:Account) U (Msgs:MsgConf) U 
              (N:Nat) U (M:Nat) U (B:Bool) .)
(def-term-set (< bal: N pend: M overdraft: true > # Msgs) | true \/
              ([A,Msgs]) | true .)
(inv no-overdraft to '`[_`,_`] on
    (< bal: N pend: M overdraft: false > # Msgs) |
    (M <= N) = (true) /\ ---((M) = (debts(Msgs)))
    (debts(Msgs) <= M) = (true)
.)
(start-proof .)
(step .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
---(
(step .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
(continue .)
---)
(continue .)
(focus 30 .)
set print conceal on .
print conceal mod_is_sorts_._____endm fmod_is_sorts_.____endfm _;_ .
set break on .
break select imp-simp-disj vu-clause-simp vu-clause-simp2 .
(step .)
